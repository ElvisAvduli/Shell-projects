#!/bin/bash

# Έλεγχος αν δόθηκε όρισμα
if [ $# -ne 1 ]; then
    echo "Χρήση: $0 <κατάλογος>"
    exit 1
fi

DIR=$1

# Έλεγχος αν το όρισμα είναι έγκυρος κατάλογος
if [ ! -d "$DIR" ]; then
    echo "Το $DIR δεν είναι έγκυρος κατάλογος."
    exit 1
fi

# Παύση για 2 δευτερόλεπτα
sleep 2

# Μετρητές
owner_count=0
group_count=0
other_count=0

# Λίστα αρχείων στον κατάλογο
FILES=$(find "$DIR" -maxdepth 1 -type f)

for file in $FILES; do
    # Έλεγχος εξουσιοδοτήσεων για τον ιδιοκτήτη
    if [ -r "$file" ] && [ -w "$file" ]; then
        ((owner_count++))
    fi
    
    # Έλεγχος εξουσιοδοτήσεων για την ομάδα
    if [ -g "$file" ] && [ -w "$file" ]; then
        ((group_count++))
    fi
    
    # Έλεγχος αν δεν υπάρχουν εξουσιοδοτήσεις για τους υπόλοιπους
    if [ ! -r "$file" ] && [ ! -w "$file" ] && [ ! -x "$file" ]; then
        ((other_count++))
    fi
done

# Εμφάνιση αποτελεσμάτων
echo "Αρχεία με εξουσιοδοτήσεις ανάγνωσης και εγγραφής για τον ιδιοκτήτη: $owner_count"
echo "Αρχεία με εξουσιοδοτήσεις ανάγνωσης και εγγραφής για την ομάδα: $group_count"
echo "Αρχεία χωρίς εξουσιοδοτήσεις για τους υπόλοιπους: $other_count"

