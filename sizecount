#!/bin/bash

# Έλεγχος αν ο αριθμός των ορισμάτων είναι 1
if [ "$#" -ne 1 ]; then
    echo "Χρήση: $0 <ακέραιος αριθμός>"
    exit 1
fi

# Έλεγχος αν το όρισμα είναι ακέραιος αριθμός
if ! [[ "$1" =~ ^[0-9]+$ ]]; then
    echo "Το όρισμα πρέπει να είναι ακέραιος αριθμός"
    exit 1
fi

# Ανάθεση της τιμής του ορίσματος στη μεταβλητή HOUR
HOUR="$1"

# Έλεγχος αν ο αριθμός είναι μεγαλύτερος του 0 και μικρότερος ή ίσος του 24
if [ "$HOUR" -le 0 ] || [ "$HOUR" -gt 24 ]; then
    echo "Ο αριθμός πρέπει να είναι μεγαλύτερος του 0 και μικρότερος ή ίσος του 24"
    exit 1
fi

# Αναζήτηση αρχείων που δημιουργήθηκαν την ώρα που δηλώνει ο αριθμός
FILES=$(find . -type f -newermt "$(date +%Y-%m-%d) $HOUR:00:00" ! -newermt "$(date +%Y-%m-%d) $HOUR:59:59")

# Έλεγχος αν βρέθηκαν αρχεία
if [ -z "$FILES" ]; then
    echo "Δεν βρέθηκαν αρχεία που δημιουργήθηκαν την ώρα $HOUR"
    exit 0
fi

# Αποθήκευση των ονομάτων των αρχείων στο αρχείο timefile
echo "$FILES" > timefile

echo "Τα αρχεία αποθηκεύτηκαν στο timefile"


